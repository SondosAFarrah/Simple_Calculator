MPASM  5.50                         LCDIS.INC   2-11-2024  18:04:32         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;       LCDIS.INC               MPB     19-12-05
                      00002 ;
                      00003 ;       Include file to operate 16x2 LCD display
                      00004 ;       Uses GPR 70 - 75
                      00005 ;       
                      00006 ;       Final version
                      00007 ;-------------------------------------------------------------------------------------------
                      00008 
  00000070            00009 Timer1  EQU     70              ; 1ms count register
  00000071            00010 TimerX  EQU     71              ; Xms count register
  00000072            00011 Var     EQU     72              ; Output variable
  00000073            00012 Point   EQU     73              ; Program table pointer
  00000074            00013 Select  EQU     74              ; Used to set or clear RS bit
  00000075            00014 OutCod  EQU     75              ; Temp store for output code
                      00015 
  00000001            00016 RS      EQU     1               ; Register select output bit
  00000002            00017 E       EQU     2               ; Enable output clocks display input
                      00018 
                      00019 
                      00020 ;--------------------------------------------------------------------------------------------   
                      00021 ;       1ms delay with 1us cycle time (1000 cycles) assuming 4MHZ oscillator
                      00022 ;--------------------------------------------------------------------------------------------   
Error[150]  : Labels must be defined in a code or data section when making an object file
0000                  00023 onems   ;nop
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00024                 MOVLW   D'249'          ; Count for 1ms delay ==> 1 + 1 + 1 + 248 * (1 + 1 + 2) + 1 + 2 
                            + 2 = 
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00025                 MOVWF   Timer1          ; Load count
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00026 loop1   NOP                     ; Pad for 4 cycle loop
Message[305]: Using default destination of 1 (file).
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00027                 DECFSZ  Timer1          ; Count
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00028                 GOTO    loop1           ; until Z
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00029                 RETURN                  ; and finish
                      00030 
                      00031 ;---------------------------------------------------------------------------------------------  
                      00032 ;       Delay Xms
                      00033 ;       Receives count in W, uses Onems
                      00034 ;---------------------------------------------------------------------------------------------  
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00035 xms             MOVWF   TimerX          ; Count for X ms
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00036 loopX   CALL    onems           ; Delay 1ms
Message[305]: Using default destination of 1 (file).
MPASM  5.50                         LCDIS.INC   2-11-2024  18:04:32         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00037                 DECFSZ  TimerX          ; Repeat X times 
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00038                 GOTO    loopX           ; until Z
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00039                 RETURN                  ; and finish
                      00040 
Error[150]  : Labels must be defined in a code or data section when making an object file
Warning[202]: Argument out of range.  Least significant bits used.
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00041 xmss    MOVLW 0xfff     
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00042                 MOVWF   TimerX          ; Count for X ms
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00043 loopX   CALL    onems           ; Delay 1ms
Message[305]: Using default destination of 1 (file).
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00044                 DECFSZ  TimerX          ; Repeat X times 
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00045                 GOTO    loopX           ; until Z
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00046                 RETURN  
                      00047 ;---------------------------------------------------------------------------------------------  
                      00048 ;       Generate data/command clock siganl E
                      00049 ;---------------------------------------------------------------------------------------------  
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00050 pulseE  BSF     PORTD,E         ; Set E high
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00051         CALL    onems           ; Delay 1ms
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00052         BCF     PORTD,E         ; Reset E low
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00053         CALL    onems           ; Delay 1ms
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00054         RETURN                  ; done
                      00055 
                      00056 ;---------------------------------------------------------------------------------------------  
                      00057 ;       Send a command byte in two nibbles from RB4 - RB7
                      00058 ;       Receives command in W, uses PulseE and Onems
                      00059 ;---------------------------------------------------------------------------------------------  
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00060 send    MOVWF   OutCod          ; Store output code
Error[152]  : Executable code and data must be defined in an appropriate section
MPASM  5.50                         LCDIS.INC   2-11-2024  18:04:32         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000                  00061         ANDLW   0F0             ; Clear low nybble
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00062         MOVWF   PORTD           ; Output high nybble
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00063         BTFSC   Select,RS       ; Test RS bit
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00064         BSF     PORTD,RS        ; and set for data
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00065         CALL    pulseE          ; and clock display register
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00066         CALL    onems           ; wait 1ms for display to complete
                      00067 
Message[305]: Using default destination of 1 (file).
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00068         SWAPF   OutCod          ; Swap low and high nybbles 
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00069         MOVF    OutCod,W        ; Retrieve output code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00070         ANDLW   0F0             ; Clear low nybble
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00071         MOVWF   PORTD           ; Output low nybble
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00072         BTFSC   Select,RS       ; Test RS bit
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00073         BSF     PORTD,RS        ; and set for data
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00074         CALL    pulseE          ; and clock display register
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00075         CALL    onems           ; wait 1ms for display to complete
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00076         RETURN                  ; done
                      00077 
                      00078 ;---------------------------------------------------------------------------------------------  
                      00079 ;       Initialise the display
                      00080 ;       Uses Send
                      00081 ;---------------------------------------------------------------------------------------------  
Error[150]  : Labels must be defined in a code or data section when making an object file
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00082 inid    MOVLW   D'100'          ; Load count for 100ms delay
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00083         CALL    xms             ; and wait for display start
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00084         MOVLW   0F0             ; Mask for select code
Error[152]  : Executable code and data must be defined in an appropriate section
MPASM  5.50                         LCDIS.INC   2-11-2024  18:04:32         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000                  00085         MOVWF   Select          ; High nybble not masked
                      00086 
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00087         MOVLW   0x30            ; Load initial nibble
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00088         MOVWF   PORTD           ; and output it to display
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00089         CALL    pulseE          ; Latch initial code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00090         MOVLW   D'5'            ; Set delay 5ms
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00091         CALL    xms             ; and wait
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00092         CALL    pulseE          ; Latch initial code again
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00093         CALL    onems           ; Wait 1ms
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00094         CALL    pulseE          ; Latch initial code again
Error[113]  : Symbol not previously defined (PORTD)
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00095         BCF     PORTD,4         ; Set 4-bit mode
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00096         CALL    pulseE          ; Latch it
                      00097         
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00098         MOVLW   0x28            ; Set 4-bit mode, 2 lines
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00099         CALL    send            ; and send code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00100         MOVLW   0x08            ; Switch off display
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00101         CALL    send            ; and send code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00102         MOVLW   0x01            ; Code to clear display
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00103         CALL    send            ; and send code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00104         MOVLW   0x06            ; Enable cursor auto inc  
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00105         CALL    send            ; and send code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00106         MOVLW   0x80            ; Zero display address
MPASM  5.50                         LCDIS.INC   2-11-2024  18:04:32         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00107         CALL    send            ; and send code
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00108         MOVLW   0x0C            ; Turn on display  
Error[151]  : Operand contains unresolvable labels or is too complex
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00109         CALL    send            ; and send code
                      00110 
Error[152]  : Executable code and data must be defined in an appropriate section
0000                  00111         RETURN                  ; Done
Error[129]  : Expected (END)
MPASM  5.50                         LCDIS.INC   2-11-2024  18:04:32         PAGE  6


SYMBOL TABLE
  LABEL                             VALUE 

E                                 00000002
OutCod                            00000075
Point                             00000073
RS                                00000001
Select                            00000074
Timer1                            00000070
TimerX                            00000071
Var                               00000072
__16F877A                         00000001
__DEBUG                           1
inid                              00000000
loop1                             00000000
loopX                             00000000
onems                             00000000
pulseE                            00000000
send                              00000000
xms                               00000000
xmss                              00000000

Errors   :   107
Warnings :     1 reported,     0 suppressed
Messages :     4 reported,     0 suppressed

